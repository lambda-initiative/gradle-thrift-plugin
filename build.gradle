apply plugin: 'java'
apply plugin: 'scala'
apply plugin: 'groovy'

repositories {
  mavenCentral()
}

if (!hasProperty('scalaVersion')) {
  ext.scalaVersion = '2.10.4'
}
def (major, minor, trivial) = scalaVersion.tokenize('.')
ext.scalaLevel = major + "." + minor

if (!hasProperty('scroogeVersion')) {
  ext.scroogeVersion = '3.14.1'
}

dependencies {
  compile gradleApi()
  compile "org.codehaus.groovy:groovy-all:1.8.6"
  compile("com.twitter:scrooge-generator_${scalaLevel}:${scroogeVersion}")
  compile("org.scala-lang:scala-library:${scalaVersion}")
  testCompile('org.spockframework:spock-core:0.7-groovy-1.8') {
    exclude module: "groovy-all"
  }
}

tasks.compileGroovy.dependsOn(tasks.compileScala)